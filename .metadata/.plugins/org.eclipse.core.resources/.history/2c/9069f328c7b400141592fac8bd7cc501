package tictactoe;

import java.util.NoSuchElementException;
import java.util.Scanner;

public class TicTacToe {

	static Board gameBoard = null;
	static PlayerController controller = null;
	static Player player1 = null;
	static Player player2 = null;
	static boolean winnerFound;
	static boolean playing = true;

	public static void main(String[] args) {
		while (playing){
			TicTacToe game = new TicTacToe();
			game.initialize();
			Scanner scanIn = new Scanner(System.in);
			gameBoard.getTicTacToeBoard();
			while(winnerFound == false){
				System.out.println(String.format("Player %d please place your piece (From 0-8)", controller.getCurrentPlayerNumber()));
				int position = scanIn.nextInt();
				try{
					controller.getCurrentPlayer().putPiece(position);
				}catch(PositionTakenException e){
					continue;
				}
				System.out.println(gameBoard.getTicTacToeBoard());
				CheckWinner checker = new CheckWinner(gameBoard, controller, position);
				winnerFound = checker.checkWinner();
				controller.changePlayer();			
			}
			System.out.println("Restart? [y/n]");
			String response = "";
			while (response.isEmpty()){
				try{
					response = scanIn.next("([y]|[n]){1}");
				}catch(NoSuchElementException e){
					continue;
				}
			}
			if (response.contains("y")){
				game.restart();
			}else playing = false;

		}

	}

	public void initialize(){

		gameBoard = Board.getBoard();
		controller = new PlayerController(gameBoard);
		winnerFound = false;
	}

	public void restart(){
		gameBoard = gameBoard.restart();;
		controller = new PlayerController(gameBoard);;
		winnerFound = false;
	}
}
